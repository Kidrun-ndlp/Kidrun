{% extends 'base.html.twig' %}

{% block title %}Hello RankingController!
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}

		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">
		<h1>Classement</h1>

		<p class="lead">
			<a class="btn btn-primary btn-lg" href="{{ path('app_export') }}">Exporter le tableau</a>
		</p>
		
		<br/><br/>
		<table border="0">
			<tr>
				<td>
					<form method="get" action="{{ path('app_filter') }}">
						<select name="grades">
							<option value="">-- Select a grade --</option>
							{% for grade in grades %}
								<option value="{{ grade.shortname }}" {% if grade.shortname == grade_checked %} selected {% endif%}>{{ grade.shortname }}</option>
							{% endfor %}
						</select>
						<select name="levels">
							<option value="">-- Select a level --</option>
							{% for level in levels %}
								<option value="{{ level }}" {% if level==level_checked %} selected {% endif%}>{{ level }}</option>
							{% endfor %}
						</select>
						<select name="genders">
							<option value="">-- Select a gender --</option>
							{% for gender in genders %}
								<option value="{{ gender }}" {% if gender==gender_checked %} selected {% endif%}>{{ gender }}</option>
							{% endfor %}
						</select>
						<input type="submit" value="Envoyer">
					</form>
					{# </tr> #}
				</td>
			</tr>
		</table>

		<br/><br/>
		<table class="table">
			<tr>
				<th scope="col">Classement</th>
				<th scope="col">Elève</th>
				<th scope="col">Classe</th>
				<th scope="col">Catégorie</th>
				<th scope="col">Genre</th>
				<th scope="col">Chronomètre</th>
			</tr>

			{% set classement = 1 %}
			{% for row in rows %}
				<tr>
					<td>{{ classement }}</td>
					<td>{{ row.firstname }}
						{{ row.lastname }}</td>
					<td>{{ row.shortname }}</td>
					<td>{{ row.level }}</td>
					<td>{{ row.gender }}</td>
					<td>{{ row.chronometre|date("H:i:s") }}</td>
				</tr>
				{% set classement = classement + 1 %}
			{% endfor %}


			{# {% set classement = 1 %}
																		{% for id, student in students %}
																			<tr>
																				<td>{{ classement }}</td>
																				<td>{{ student.firstname }}
																					{{ student.lastname }}</td>
																				<td>{{ student.shortname }}</td>
																				<td>{{ student.level }}</td>
																				<td>{{ student.gender }}</td>
																				<td>{{ chronometres[id]|date("H:i:s") }}</td>
																			</tr>
																			{% set classement = classement + 1 %}
																		{% endfor %} #}

			{{ error_message }}
		</table>


	</div>
{% endblock %}
